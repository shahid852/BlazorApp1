@page "/test"
@* @inject HttpClient Http *@

<PageTitle>Test</PageTitle>
<h3>Account Balance</h3>
@* <button class="btn btn-primary" @onclick="GetAccountDetails">Get Account Balance</button>
<p>Balance: @balance USD</p> *@

@* @code {
    private decimal balance = 0;

    private async Task GetAccountDetails()
    {
        try
        {
            var response = await Http.GetAsync("https://api.example.com/account/7"); // Adjust the URL as necessary
            response.EnsureSuccessStatusCode();

            var jsonString = await response.Content.ReadAsStringAsync();
            var accountDetails = System.Text.Json.JsonSerializer.Deserialize<AccountDetails>(jsonString);

            if (accountDetails != null)
            {
                balance = accountDetails.Balance;
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error fetching account details: {ex.Message}");
            // Consider adding user-friendly error handling and displaying it in the UI
        }
    }

    public class AccountDetails
    {
        public int Id { get; set; }
        public int CustomerId { get; set; }
        public string AccountType { get; set; }
        public decimal Balance { get; set; }
        public string Currency { get; set; }
        public DateTime CreatedAt { get; set; }
        public string Status { get; set; }
    }
} *@
